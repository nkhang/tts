<!DOCTYPE html>
<html>

<head>
    <title>Text to speech</title>
    <link rel="stylesheet" href="/stylesheets/main.css" />
    <link rel="stylesheet" href="/stylesheets/profile.css" />
    <link rel="stylesheet" href="/stylesheets/common.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <header>
        <%- include('navbar') %>
    </header>
    <div class="container" style="margin-top: 100px; margin-bottom: 10%;">
        <div style="max-width: 700px; margin: auto;">
            <h3 style="text-align: center;">THÔNG TIN TÀI KHOẢN</h3>

            <!--backend needs to change value of this into user's info-->

            <table style="width: 100%; margin-top: 20px;">
                <tr>
                    <td scope="col" style="padding-bottom:16px;">HỌ TÊN</td>
                    <td style="padding-bottom:16px;">
                        <input name="name" id="name" class="form-control" value="<%= user.fullname%>" />
                    </td>

                </tr>
                <tr style="position: relative;;">
                    <td style="padding-bottom:16px;">SỐ ĐIỆN THOẠI</td>
                    <td style="padding-bottom:16px;">
                        <input name="phone" id="phone" class="form-control" disabled value="<%= user.numberPhone    %>" />
                    </td>
                    <td style="padding-left: 8px; top:10px; position: absolute;">
                        <a href="javascript:void(0)" onclick="change_phone()">
                            <i class="fa fa-pencil-square-o" style="font-size: 20px;" aria-hidden="true"></i>
                        </a>
                        <script>
                            function change_phone() {
                                $('#phone').prop('disabled', false);
                            }
                        </script>


                    </td>
                </tr>
                <tr style="position: relative;;">
                    <td scope="col" style="padding-bottom:16px;">EMAIL</td>
                    <td style="padding-bottom:16px;">
                        <input name="email" id="email" class="form-control" disabled value="<%= user.email%>" />
                    </td>
                    <td style="padding-left: 8px; top:10px; position: absolute;">
                        <a href="javascript:void(0)" onclick="change_email()">
                            <i style="font-size: 20px;" class="fa fa-pencil-square-o" aria-hidden="true"></i>
                        </a>
                        <script>
                            function change_email() {
                                $('#email').prop('disabled', false);
                            }
                        </script>
                    </td>
                </tr>
                <tr style="position: relative;">
                    <td style="padding-bottom:16px;">MẬT KHẨU</td>
                    <td style="padding-bottom:16px;">
                        <input name="password" id="password" class="form-control" readonly value="your password..."
                            type="password" />
                    </td>
                    <td style="font-size: 20px; padding-left: 8px; top: 3px; position: absolute;">
                        <a href="javascript:void(0)" onclick="change_password()">
                            <i class="fa fa-pencil-square-o" aria-hidden="true" style="font-size: 20px;"></i>
                        </a>
                        <script>
                            function change_password() {
                                $('#password').prop('disabled', false);
                                $('#password').attr('value', '')
                                $('#input_newpass_container').css({ 'display': 'table-row' })
                                $('#confirm_newpass_container').css({ 'display': 'table-row' })
                                $('#confirm_changepass_container').css({ 'display': 'table-row' })
                            }
                        </script>
                    </td>
                </tr>

                <tr id="input_newpass_container" class="collapse show" style="display:none;">
                    <td style="padding-bottom:16px;">MẬT KHẨU MỚI</td>
                    <td style="padding-bottom:16px;">
                        <input name="new_password" id="new_password" class="form-control" />
                    </td>
                </tr>

                <tr id="confirm_newpass_container" class="collapse show" style="display: none;">
                    <td style="padding-bottom:16px;">MẬT KHẨU MỚI</td>
                    <td style="padding-bottom:16px;">
                        <input class="form-control" name="confirm_new_password" id="confirm_new_password" />
                    </td>
                </tr>
                <tr id="confirm_changepass_container" class="collapse show" style="display: none;">
                    <td style="padding-bottom:16px;"></td>
                    <td style="padding-bottom:16px;">
                        <div style="text-align: center;">
                            <button style="display:inline-block; background:#599cbd; color:white; width: 120px;"
                                class="btn btn-sm">XÁC NHẬN</button>
                            <button onclick="cancel_change_password()"
                                style="display:inline-block; margin-left: 30px; padding-left:12px; padding-right: 12px;"
                                class="btn btn-secondary btn-sm">HỦY BỎ</button>
                        </div>
                        <script>
                            function cancel_change_password() {
                                $('#new_password').attr('value', '');
                                $('#confirm_new_password').attr('value', '');
                                $('#password').attr('value', 'your password...')
                                $('#password').attr('disabled', 'disabled')
                                $('#input_newpass_container').css({ 'display': 'none' })
                                $('#confirm_newpass_container').css({ 'display': 'none' })
                                $('#confirm_changepass_container').css({ 'display': 'none' })
                            }
                        </script>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <div style="text-align: center;">
                            <button style="display:inline-block; background:#599cbd; color:white; width: 120px;"
                                class="btn btn-sm">LƯU THAY ĐỔI</button>
                            <button onclick="cancel_change()"
                                style="display:inline-block; margin-left: 30px; padding-left:12px; padding-right: 12px;"
                                class="btn btn-secondary btn-sm">HỦY BỎ</button>
                        </div>
                        <script>
                            //backend need to change value of this into user's info
                            function cancel_change() {
                                $('#name').val('Kianto de God')
                                $('#email').val('god@gmail.com')
                                $('#phone').val('0319112019')
                                $('#email').prop('disabled', true)
                                $('#phone').prop('disabled', true);

                                $('#new_password').attr('value', '');
                                $('#confirm_new_password').attr('value', '');
                                $('#password').attr('value', 'your password...')
                                $('#password').attr('disabled', 'disabled')
                                $('#input_newpass_container').css({ 'display': 'none' })
                                $('#confirm_newpass_container').css({ 'display': 'none' })
                                $('#confirm_changepass_container').css({ 'display': 'none' })
                            }
                        </script>
                    </td>
                </tr>

            </table>

        </div>



    </div>

    <%- include('footer.ejs') %>
</body>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>
    function logout() {
        $.post("/api/users/logout").done(() => {
            window.location.reload()
        });
    }
</script>

</html>