<!DOCTYPE html>
<html>

<head>
    <title>Text to speech</title>
    <link rel="stylesheet" href="/stylesheets/main.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!--link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    /-->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<style>
    .dropdown {
        position: relative;
        border: none;
    }

    .dropdown-content {
        margin-top: 1px;
        margin-left: 0px;
        display: none;
        position: absolute;
        background-color: white;
        min-width: 200px;
        overflow: auto;
        border-radius: 4px;
        z-index: 1;
        border: 1px solid lightgrey;
    }

    .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
    }

    .dropdown-content a:hover {
        background-color: #599cbd;
        color: white;
    }

    .show {
        display: block;
    }
</style>

<body>
    <header>
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <img class="logo" src="img/login-logo.PNG" alt="logo" />
                </div>
                <div class="col-6">
                    <nav>
                        <ul class="nav__links ml-1" style="float:right;">
                            <% if(!user){ %>
                            <li><a href="/" style="color:white">Trang chủ</a></li>
                            <li><a href="#" style="color:white">Giới thiệu</a></li>
                            <li><a href="#" style="color:white">Bảng giá</a></li>
                            <li><a href="/login" style="color:white">Đăng nhập</a></li>
                            <li><a href="/register" style="color:white">Đăng ký</a></li>
                            <% } %> <% if(user){ %>
                            <li>
                                <a href="#" style="color:white;">TRANG CHỦ</a>
                            </li>
                            <li>
                                <a href="#" style="color:white;">GIỚI THIỆU</a>
                            </li>
                            <li>
                                <a href="#" style="color:white;">QUẢN LÝ</a>
                            </li>
                            <li class="dropdown">
                                <a onclick="open_dropdow()" href="javascript:void(0)" aria-haspopup="true"
                                    aria-expanded="false" class="dropbtn dropdown-toggle nonehover"
                                    style="color:white;">
                                    Xin chào <%=user.fullname%></a>
                                <div id="myDropdown" class="dropdown-content">
                                    <a class="dropdown-item" href="/profile">Thông tin tài khoản</a>
                                    <a class="dropdown-item" href="#">Đổi mật khẩu</a>
                                    <a class="dropdown-item" href="#">Cài đặt</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="#" onclick="logout();">Đăng xuất</a>
                            </li>
                            <script type="text/javascript">
                                function open_dropdow() {
                                    document.getElementById("myDropdown").classList.toggle("show");
                                }

                                window.onclick = function (event) {
                                    if (!event.target.matches('.dropbtn')) {
                                        var dropdowns = document.getElementsByClassName("dropdown-content");
                                        var i;
                                        for (i = 0; i < dropdowns.length; i++) {
                                            var openDropdown = dropdowns[i];
                                            if (openDropdown.classList.contains('show')) {
                                                openDropdown.classList.remove('show');
                                            }
                                        }
                                    }
                                }
                            </script>
                            </li>
                            <% } %>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <div class="container" style="margin-top: 100px; margin-bottom: 20px;">
        <div style="max-width: 700px; margin: auto;">
            <h3 style="text-align: center;">THÔNG TIN TÀI KHOẢN</h3>

            <!--backend needs to change value of this into user's info--> 

            <table style="width: 100%; margin-top: 20px;">
                <tr>
                    <td scope="col" style="padding-bottom:16px;">HỌ TÊN</td>
                    <td style="padding-bottom:16px;">
                        <input name="name" id="name" class="form-control" value="Kianto de God" />
                    </td>

                </tr>
                <tr style="position: relative;;">
                    <td style="padding-bottom:16px;">SỐ ĐIỆN THOẠI</td>
                    <td style="padding-bottom:16px;">
                        <input name="phone" id="phone" class="form-control" disabled value="0319112019" />
                    </td>
                    <td style="padding-left: 8px; top:10px; position: absolute;">
                        <a href="javascript:void(0)" onclick="change_phone()">
                                <i class="fa fa-pencil-square-o" style="font-size: 20px;" aria-hidden="true"></i>
                        </a>
                        <script>
                            function change_phone(){
                                $('#phone').prop('disabled',false);
                            }
                        </script>
                        

                    </td>
                </tr>
                <tr style="position: relative;;">
                    <td scope="col" style="padding-bottom:16px;">EMAIL</td>
                    <td style="padding-bottom:16px;">
                        <input name="email" id="email" class="form-control" disabled value="god@gmail.com" />
                    </td>
                    <td style="padding-left: 8px; top:10px; position: absolute;">
                        <a href="javascript:void(0)" onclick="change_email()">
                                <i style="font-size: 20px;"
                                class="fa fa-pencil-square-o" aria-hidden="true"></i>
                        </a>
                        <script>
                            function change_email(){
                                $('#email').prop('disabled',false);
                            }
                        </script>
                    </td>
                </tr>
                <tr style="position: relative;">
                    <td style="padding-bottom:16px;">MẬT KHẨU</td>
                    <td style="padding-bottom:16px;">
                        <input name="password" id="password" class="form-control" disabled value="your password..." type="password" />
                    </td>
                    <td style="font-size: 20px; padding-left: 8px; top: 3px; position: absolute;">
                        <a href="javascript:void(0)" onclick="change_password()">
                                <i class="fa fa-pencil-square-o" aria-hidden="true" style="font-size: 20px;"></i>
                        </a>
                        <script>
                            function change_password(){
                                $('#password').prop('disabled',false);
                                $('#password').attr('value','')
                                $('#input_newpass_container').css({'display':'table-row'})
                                $('#confirm_newpass_container').css({'display':'table-row'})
                                $('#confirm_changepass_container').css({'display':'table-row'})
                            }
                        </script>                       
                </td>
                </tr>
              
                <tr id="input_newpass_container" class="collapse show" style="display:none;">
                    <td style="padding-bottom:16px;">MẬT KHẨU MỚI</td>
                    <td style="padding-bottom:16px;">
                        <input name="new_password" id="new_password" class="form-control" />
                    </td>
                </tr>

                <tr id="confirm_newpass_container" class="collapse show" style="display: none;" >
                    <td style="padding-bottom:16px;">MẬT KHẨU MỚI</td>
                    <td style="padding-bottom:16px;">
                        <input class="form-control"name="confirm_new_password" id="confirm_new_password" />
                    </td>
                </tr>
                <tr id="confirm_changepass_container" class="collapse show" style="display: none;">
                    <td style="padding-bottom:16px;"></td>
                    <td style="padding-bottom:16px;">
                        <div style="text-align: center;">
                            <button
                                style="display:inline-block; background:#599cbd; color:white; width: 120px;"
                                class="btn btn-sm">XÁC NHẬN</button>
                            <button onclick="cancel_change_password()"
                                style="display:inline-block; margin-left: 30px; padding-left:12px; padding-right: 12px;"
                                class="btn btn-secondary btn-sm">HỦY BỎ</button>
                        </div>
                        <script>
                            function cancel_change_password(){
                                $('#new_password').attr('value','');
                                $('#confirm_new_password').attr('value','');
                                $('#password').attr('value','your password...')
                                $('#password').attr('disabled','disabled')
                                $('#input_newpass_container').css({'display':'none'})
                                $('#confirm_newpass_container').css({'display':'none'})
                                $('#confirm_changepass_container').css({'display':'none'})
                            }
                        </script>
                    </td>
                </tr>

                <tr>
                    <td style="padding-bottom:16px;">ĐỊA CHỈ</td>
                    <td style="padding-bottom:16px;">
                        <input type="text" name="" id="" class="form-control">
                    </td>
                </tr>

                <tr>
                    <td></td>
                    <td>
                        <div style="text-align: center;">
                            <button
                                style="display:inline-block; background:#599cbd; color:white; width: 120px;"
                                class="btn btn-sm">LƯU THAY ĐỔI</button>
                            <button onclick="cancel_change()"
                                style="display:inline-block; margin-left: 30px; padding-left:12px; padding-right: 12px;"
                                class="btn btn-secondary btn-sm">HỦY BỎ</button>
                        </div>
                        <script>
                            //backend need to change value of this into user's info
                            function cancel_change(){
                                $('#name').val('Kianto de God')
                                $('#email').val('god@gmail.com')
                                $('#phone').val('0319112019')
                                $('#email').prop('disabled',true)
                                $('#phone').prop('disabled',true);

                                $('#new_password').attr('value','');
                                $('#confirm_new_password').attr('value','');
                                $('#password').attr('value','your password...')
                                $('#password').attr('disabled','disabled')
                                $('#input_newpass_container').css({'display':'none'})
                                $('#confirm_newpass_container').css({'display':'none'})
                                $('#confirm_changepass_container').css({'display':'none'})
                            }
                        </script>
                    </td>
                </tr>

            </table>

        </div>



    </div>

    <footer id="sticky-footer" class="py-4 bg-primary text-white">
        <div class="container">
            <div class="row">
                <div class="col-6">
                    <b>LIÊN HỆ</b>
                    <br />
                    kianto@gmail.com - Tel: 028 6288 4499
                    <br />
                    227 Đường Nguyễn Văn Cừ, Phường 4, Quận 5, Hồ Chí Minh
                </div>
                <div class="col-6">
                    <b>VỀ CHÚNG TÔI</b>
                    <br />
                    <br />
                    Sản phẩm được phát hành bởi nhóm 4 - môn Quản lý dự án phần mềm
                </div>
            </div>
            <small>Copyright &copy;</small>
        </div>
    </footer>
</body>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>
    function logout() {
        $.post("/api/users/logout").done(() => {
            window.location.reload()
        });
    }
</script>

</html>